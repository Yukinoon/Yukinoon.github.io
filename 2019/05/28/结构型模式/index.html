<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="Yukinoon' s Blog" type="application/atom+xml">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>'结构型模式' | Yukinoon' s Blog</title>
  </head>
  <body itemscope="" itemtype="http://schema.org/WebPage" lang="zh_CN" data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">Yukinoon' s Blog</a></h1>
        <h2 class="subtitle"></h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">首页</a></li>
        
        <li role="menuitem"><a href="/archives/">归档</a></li>
        
        <li role="menuitem"><a href="/categories/">分类</a></li>
        
        <li role="menuitem"><a href="/tags/">标签</a></li>
        
        <li role="menuitem"><a href="/about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card" itemscope="" itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://www.Yukinoon.com/blog/2019/05/28/结构型模式/">
      <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
       <meta itemprop="name" content="John Doe">
       <meta itemprop="description" content="">
       <meta itemprop="image" content="/images/myavatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="Yukinoon' s Blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">'结构型模式'</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-28T09:36:09+08:00">2019-05-28 09:36:09</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>[TOC]</p>
<h3 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h3><p>– 核心作用：是从程序的结构上实现松耦合，从而可以扩大整体的类结构，用来解决更大的问题。<br>– 分类：<br>• 适配器模式、代理模式、桥接模式、装饰模式、组合模式、外观模式、享元模式</p>
<h4 id="适配器模式-adapter"><a href="#适配器模式-adapter" class="headerlink" title="适配器模式(adapter)"></a>适配器模式(adapter)</h4><p>适配器模式：</p>
<p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190426200809.png" alt="适配器"></p>
<p>被适配（相当于PS/2键盘）</p>
<figure class="hljs highlight JAVA"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">package</span> com.bjsxt.adapter;<br><br><span class="hljs-comment">/**<br> * 被适配的类<br> * (相当于例子中的，PS/2键盘)<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Adaptee</span> </span>&#123;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span></span>&#123;<br>		System.out.println(<span class="hljs-string">"可以完成客户请求的需要的功能！"</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>适配器接口</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.adapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Target</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">handleReq</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>适配器：相当于USB - &gt; PS/2转换头</p>
<p>适配器1（通过继承）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.adapter;<br><br><span class="hljs-comment">/**<br> * 适配器 (类适配器方式)<br> * (相当于usb和ps/2的转接器)<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Adapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Adaptee</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Target</span> </span>&#123;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleReq</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>.request();<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>适配器2（通过构造方法注入对象）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.adapter;<br><br><span class="hljs-comment">/**<br> * 适配器 (对象适配器方式,使用了组合的方式跟被适配对象整合)<br> * (相当于usb和ps/2的转接器)<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Adapter2</span>  <span class="hljs-keyword">implements</span> <span class="hljs-title">Target</span> </span>&#123;<br>	<br>	<span class="hljs-keyword">private</span> Adaptee adaptee;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleReq</span><span class="hljs-params">()</span> </span>&#123;<br>		adaptee.request();<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Adapter2</span><span class="hljs-params">(Adaptee adaptee)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.adaptee = adaptee;<br>	&#125;<br>	<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>调用者Clien（相当于只有USB口的笔记本）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.adapter;<br><br><span class="hljs-comment">/**<br> * 客户端类<br> * (相当于例子中的笔记本，只有USB接口)<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">(Target t)</span></span>&#123;<br>		t.handleReq();<br>	&#125;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		Client  c = <span class="hljs-keyword">new</span> Client();<br>		<br>		Adaptee a = <span class="hljs-keyword">new</span> Adaptee();<br>		<br><span class="hljs-comment">//		Target t = new Adapter();</span><br><br>		Target t = <span class="hljs-keyword">new</span> Adapter2(a);<br>		<br>		c.test1(t);<br>		<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>• 工作中的场景<br>– 经常用来做旧系统改造和升级<br>– 如果我们的系统开发之后再也不需要维护，那么很多模式都是没必要的，但是不幸的是，事实却是维护一个系统的代价往往是开发一个系统的数倍。<br>• 我们学习中见过的场景<br>– java.io.InputStreamReader(InputStream)<br>– java.io.OutputStreamWriter(OutputStream)</p>
<h4 id="代理模式-Proxy-pattern"><a href="#代理模式-Proxy-pattern" class="headerlink" title="代理模式(Proxy pattern)"></a>代理模式(Proxy pattern)</h4><p>– 核心角色：<br>    • 抽象角色<br>        – 定义代理角色和真实角色的公共对外方法<br>    • 真实角色<br>        – 实现抽象角色，定义真实角色所要实现的业务逻辑，供代理角色调用。<br>        – 关注真正的业务逻辑！<br>    • 代理角色<br>        – 实现抽象角色，是真实角色的代理，通过真实角色的业务逻辑方法来实现抽象方法，并可以附加自己的操作。<br>        – 将统一的流程控制放到代理角色中处理！</p>
<p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190426211700.png" alt=""></p>
<h5 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h5><p>• 应用场景：<br>    – 安全代理：屏蔽对真实角色的直接访问。<br>    – 远程代理：通过代理类处理远程方法调用(RMI)<br>    – 延迟加载：先加载轻量级的代理对象，真正需要再加载真实对象。<br>• 比如你要开发一个大文档查看软件，大文档中有大的图片，有可能一个图片有100MB，在打开文件时不可能将所有的图片都显示出来，这样就可以<br>使用代理模式，当需要查看图片时，用proxy来进行大图片的打开。<br>• 分类：<br>– 静态代理(静态定义代理类)<br>– 动态代理(动态生成代理类)<br>• JDK自带的动态代理<br>• java assist字节码操作库实现<br>• CGLIB<br>• ASM(底层使用指令，可维护性较差)</p>
<h5 id="静态代理模式"><a href="#静态代理模式" class="headerlink" title="静态代理模式"></a>静态代理模式</h5><p>明星接口：Star.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.staticProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Star</span> </span>&#123;<br>	<span class="hljs-comment">/**<br>	 * 面谈<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">confer</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 签合同<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">signContract</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 订票<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bookTicket</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 唱歌<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 收钱<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">collectMoney</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>真实明星：RealStar.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.staticProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RealStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Star</span> </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bookTicket</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.bookTicket()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">collectMoney</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.collectMoney()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">confer</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.confer()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">signContract</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.signContract()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar(周杰伦本人).sing()"</span>);<br>	&#125;<br>	<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>经纪人（代理类）：ProxyStar.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.staticProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Star</span> </span>&#123;<br>	<br>	<br>	<span class="hljs-comment">//面向接口</span><br>	<span class="hljs-keyword">private</span> Star star;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProxyStar</span><span class="hljs-params">(Star star)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.star = star;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bookTicket</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"ProxyStar.bookTicket()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">collectMoney</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"ProxyStar.collectMoney()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">confer</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"ProxyStar.confer()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">signContract</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"ProxyStar.signContract()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span> </span>&#123;<br>		star.sing();<br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>调用者（客户）：Client.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.staticProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		Star real = <span class="hljs-keyword">new</span> RealStar();<br>		Star proxy = <span class="hljs-keyword">new</span> ProxyStar(real);<br>		<br>		proxy.confer();<br>		proxy.signContract();<br>		proxy.bookTicket();<br>		proxy.sing();<br>		<br>		proxy.collectMoney();<br>		<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h5><p>• 动态代理相比于静态代理的优点<br>– 抽象角色中(接口)声明的所以方法都被转移到调用处理器一个集中的方法中处理，这样，我们可以更加灵活和统一的处理众多的方法。</p>
<p>• JDK自带的动态代理<br>    – java.lang.reflect.Proxy<br>        • 作用：动态生成代理类和对象<br>– java.lang.reflect.InvocationHandler(处理器接口)<br>    • 可以通过invoke方法实现对真实角色的代理访问。<br>    • 每次通过Proxy生成代理类对象对象时都要指定对应的处理器对象</p>
<p>Star(接口)</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.dynamicProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Star</span> </span>&#123;<br>	<span class="hljs-comment">/**<br>	 * 面谈<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">confer</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 签合同<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">signContract</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 订票<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bookTicket</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 唱歌<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-comment">/**<br>	 * 收钱<br>	 */</span><br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">collectMoney</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>realStar</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.dynamicProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RealStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Star</span> </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bookTicket</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.bookTicket()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">collectMoney</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.collectMoney()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">confer</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.confer()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">signContract</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar.signContract()"</span>);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"RealStar(周杰伦本人).sing()"</span>);<br>	&#125;<br>	<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>StarHandler.java（明星的处理器）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.dynamicProxy;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StarHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;<br>	<br>	Star realStar;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">StarHandler</span><span class="hljs-params">(Star realStar)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.realStar = realStar;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span><br>			<span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>		Object object = <span class="hljs-keyword">null</span>;<br>		<br>		System.out.println(<span class="hljs-string">"真正的方法执行前！"</span>);<br>		System.out.println(<span class="hljs-string">"面谈，签合同，预付款，订机票"</span>);<br>		<br>		<span class="hljs-keyword">if</span>(method.getName().equals(<span class="hljs-string">"sing"</span>))&#123;<br>			object = method.invoke(realStar, args);<br>		&#125;<br>		<br>		System.out.println(<span class="hljs-string">"真正的方法执行后！"</span>);<br>		System.out.println(<span class="hljs-string">"收尾款"</span>);<br>		<span class="hljs-keyword">return</span> object;<br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>客户Client（调用者）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.proxy.dynamicProxy;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		<br>		Star realStar = <span class="hljs-keyword">new</span> RealStar();<br>		StarHandler handler = <span class="hljs-keyword">new</span> StarHandler(realStar);<br>		<br>		Star proxy = (Star) Proxy.newProxyInstance(ClassLoader.getSystemClassLoader(), <br>				<span class="hljs-keyword">new</span> Class[]&#123;Star.class&#125;, handler);<br>		<br>		proxy.sing();<br>		<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="开发框架中应用场景"><a href="#开发框架中应用场景" class="headerlink" title="开发框架中应用场景"></a>开发框架中应用场景</h5><p>​    – struts2中拦截器的实现<br>​    – 数据库连接池关闭处理<br>​    – Hibernate中延时加载的实现<br>​    – mybatis中实现拦截器插件<br>​    – AspectJ的实现<br>​    – spring中AOP的实现<br>​        • 日志拦截<br>​        • 声明式事务处理<br>​    – web service<br>​    – RMI远程方法调用<br>​    – …<br>– 实际上，随便选择一个技术框架都会用到代理模式！</p>
<h4 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h4><h5 id="未使用桥接，使用多继承"><a href="#未使用桥接，使用多继承" class="headerlink" title="未使用桥接，使用多继承"></a>未使用桥接，使用多继承</h5><p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190428205241.png" alt=""></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Computer</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Desktop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Computer</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售台式机！"</span>);<br>	&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Laptop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Computer</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售笔记本！"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pad</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Computer</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售平板电脑！"</span>);<br>	&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LenovoDesktop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Desktop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售联想台式机"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LenovoLaptop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Laptop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售联想笔记本"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LenovoPad</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Pad</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售联想平板电脑"</span>);<br>	&#125;<br>&#125;<br><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShenzhouDesktop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Desktop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售神舟台式机"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShenzhouLaptop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Laptop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售神舟笔记本"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShenzhouPad</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Pad</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售神舟平板电脑"</span>);<br>	&#125;<br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DellDesktop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Desktop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售戴尔台式机"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DellLaptop</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Laptop</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售戴尔笔记本"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DellPad</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Pad</span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售戴尔平板电脑"</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="使用桥接"><a href="#使用桥接" class="headerlink" title="使用桥接"></a>使用桥接</h5><p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190428210416.png" alt=""></p>
<p>品牌类型的维度，Brand.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.bridge;<br><br><span class="hljs-comment">/**<br> * 品牌<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Brand</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lenovo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Brand</span> </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售联想电脑"</span>);<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dell</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Brand</span> </span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售Dell电脑"</span>);<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shenzhou</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Brand</span> </span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"销售神舟电脑"</span>);<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>电脑类型的维度：computer2.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.bridge;<br><br><span class="hljs-comment">/**<br> * 电脑类型的维度<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Computer2</span> </span>&#123;<br>	<br>	<span class="hljs-keyword">protected</span> Brand brand;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Computer2</span><span class="hljs-params">(Brand b)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.brand = b;<br>	&#125;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span></span>&#123;<br>		brand.sale();<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Desktop2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Computer2</span> </span>&#123;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Desktop2</span><span class="hljs-params">(Brand b)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>(b);<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>.sale();<br>		System.out.println(<span class="hljs-string">"销售台式机"</span>);<br>	&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Laptop2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Computer2</span> </span>&#123;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Laptop2</span><span class="hljs-params">(Brand b)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>(b);<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sale</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>.sale();<br>		System.out.println(<span class="hljs-string">"销售笔记本"</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>测试：Client.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		<span class="hljs-comment">//销售联想的笔记本电脑</span><br>		Computer2  c = <span class="hljs-keyword">new</span> Laptop2(<span class="hljs-keyword">new</span> Lenovo());<br>		c.sale();<br>		<br>		<span class="hljs-comment">//销售神舟的台式机</span><br>		Computer2 c2 = <span class="hljs-keyword">new</span> Desktop2(<span class="hljs-keyword">new</span> Shenzhou());<br>		c2.sale();<br>		<br>		<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="桥接模式总结："><a href="#桥接模式总结：" class="headerlink" title="桥接模式总结："></a>桥接模式总结：</h5><p>– 桥接模式可以取代多层继承的方案。 多层继承违背了单一职责原则，复用性较差，类的个数也非常多。桥接模式可以极大的减少子类的个数，从而降低管理和维护的成本。<br>– 桥接模式极大的提高了系统可扩展性，在两个变化维度中任意扩展一个维度，都不需要修改原有的系统，符合开闭原则。</p>
<h5 id="桥接模式实际开发中应用场景"><a href="#桥接模式实际开发中应用场景" class="headerlink" title="桥接模式实际开发中应用场景"></a>桥接模式实际开发中应用场景</h5><p>– JDBC驱动程序<br>– AWT中的Peer架构<br>– 银行日志管理：<br>    • 格式分类：操作日志、交易日志、异常日志<br>    • 距离分类：本地记录日志、异地记录日志<br>– 人力资源系统中的奖金计算模块：<br>    • 奖金分类：个人奖金、团体奖金、激励奖金。<br>    • 部门分类：人事部门、销售部门、研发部门。<br>– OA系统中的消息处理：<br>    • 业务类型：普通消息、加急消息、特急消息<br>    • 发送消息方式：系统内消息、手机短信、邮件</p>
<h4 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h4><p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190505203539.png" alt=""></p>
<p>• 组合模式工作流程分析：<br>    – 组合模式为处理树形结构提供了完美的解决方案，描述了如何将容器和叶子进行递归组合，使得用户在使用时可以一致性的对待容器和叶子。<br>    – 当容器对象的指定方法被调用时，将遍历整个树形结构，寻找也包含这个方法的成员，并调用执行。其中，使用了递归调用的机制对整个结构进行处理。<br>• 使用组合模式，模拟杀毒软件架构设计</p>
<h5 id="模仿杀毒软件杀毒："><a href="#模仿杀毒软件杀毒：" class="headerlink" title="模仿杀毒软件杀毒："></a>模仿杀毒软件杀毒：</h5><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.composite;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">//抽象构建</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">AbstractFile</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">killVirus</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//杀毒</span><br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageFile</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AbstractFile</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ImageFile</span><span class="hljs-params">(String name)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.name = name;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">killVirus</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"---图像文件："</span>+name+<span class="hljs-string">",进行查杀！"</span>);<br>	&#125;<br>	<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TextFile</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AbstractFile</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TextFile</span><span class="hljs-params">(String name)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.name = name;<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">killVirus</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"---文本文件："</span>+name+<span class="hljs-string">",进行查杀！"</span>);<br>	&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoFile</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AbstractFile</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">VideoFile</span><span class="hljs-params">(String name)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.name = name;<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">killVirus</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"---视频文件："</span>+name+<span class="hljs-string">",进行查杀！"</span>);<br>	&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Folder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AbstractFile</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<span class="hljs-comment">//定义容器，用来存放本容器构建下的子节点</span><br>	<span class="hljs-keyword">private</span> List&lt;AbstractFile&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;AbstractFile&gt;();<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Folder</span><span class="hljs-params">(String name)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.name = name;<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(AbstractFile file)</span></span>&#123;<br>		list.add(file);<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(AbstractFile file)</span></span>&#123;<br>		list.remove(file);<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> AbstractFile <span class="hljs-title">getChild</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span></span>&#123;<br>		<span class="hljs-keyword">return</span> list.get(index);<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">killVirus</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"---文件夹："</span>+name+<span class="hljs-string">",进行查杀"</span>);<br>		<br>		<span class="hljs-keyword">for</span> (AbstractFile file : list) &#123;<br>			file.killVirus();<br>		&#125;<br>		<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.composite;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		AbstractFile f2,f3,f4,f5;<br>		Folder f1 = <span class="hljs-keyword">new</span> Folder(<span class="hljs-string">"我的收藏"</span>);<br>		<br>		f2 = <span class="hljs-keyword">new</span> ImageFile(<span class="hljs-string">"老高的大头像.jpg"</span>);<br>		f3 = <span class="hljs-keyword">new</span> TextFile(<span class="hljs-string">"Hello.txt"</span>);<br>		f1.add(f2);<br>		f1.add(f3);<br>		<br>		Folder f11 = <span class="hljs-keyword">new</span> Folder(<span class="hljs-string">"电影"</span>);<br>		f4 = <span class="hljs-keyword">new</span> VideoFile(<span class="hljs-string">"笑傲江湖.avi"</span>);<br>		f5 = <span class="hljs-keyword">new</span> VideoFile(<span class="hljs-string">"神雕侠侣.avi"</span>);<br>		f11.add(f4);<br>		f11.add(f5);<br>		f1.add(f11);<br>		<br>		<br><span class="hljs-comment">//		f2.killVirus();</span><br>		<br>		f1.killVirus();<br>		<br>		<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="开发中的应用场景："><a href="#开发中的应用场景：" class="headerlink" title="开发中的应用场景："></a>开发中的应用场景：</h5><p>– 操作系统的资源管理器<br>– GUI中的容器层次图<br>– XML文件解析<br>– OA系统中，组织结构的处理<br>– Junit单元测试框架<br>• 底层设计就是典型的组合模式，TestCase(叶子)、TestUnite(容器)、Test接口(抽象)</p>
<h4 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h4><p>• 实现细节：<br>    – Component抽象构件角色：<br>        • 真实对象和装饰对象有相同的接口。这样，客户端对象就能够以与真实对象相同的方式同装饰对象交互。<br>    – ConcreteComponent 具体构件角色(真实对象)：<br>        • io流中的FileInputStream、FileOutputStream<br>    – Decorator装饰角色：<br>        • 持有一个抽象构件的引用。装饰对象接受所有客户端的请求，并把这些请求转发给真实的对象。这样，就能在真实对象调用前后增加新的功能。<br>    – ConcreteDecorator具体装饰角色：</p>
<p>​        • 负责给构件对象增加新的责任。</p>
<p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190506204851.png" alt=""></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.decorator;<br><br><span class="hljs-comment">//抽象构建</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICar</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-comment">//真实构建</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ICar</span></span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"地上跑"</span>);<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-comment">//Decorator装饰角色</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperCar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ICar</span></span>&#123;<br><br>	<span class="hljs-keyword">protected</span> ICar car;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SuperCar</span><span class="hljs-params">(ICar car)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.car = car;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">()</span> </span>&#123;<br>		car.move();<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-comment">//真实装饰</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SuperCar</span></span>&#123;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FlyCar</span><span class="hljs-params">(ICar car)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>(car);<br>	&#125;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fly</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"天上飞"</span>);<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>.move();<br>		fly();<br>	&#125;<br>	<br>&#125;<br><br><span class="hljs-comment">//真实装饰</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WaterCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SuperCar</span></span>&#123;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WaterCar</span><span class="hljs-params">(ICar car)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>(car);<br>	&#125;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">swim</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"水里游"</span>);<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>.move();<br>		swim();<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>调用Client</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		Car car = <span class="hljs-keyword">new</span> Car();<br>		car.move();<br>		<br>		System.out.println(<span class="hljs-string">"增加新的功能，飞行"</span>);<br>		<br>		FlyCar flycar = <span class="hljs-keyword">new</span> FlyCar(car);<br>		flycar.move();<br>		<br>		System.out.println(<span class="hljs-string">"增加新的功能，游泳"</span>);<br>		<br>		WaterCar waterCar = <span class="hljs-keyword">new</span> WaterCar(<span class="hljs-keyword">new</span> FlyCar(car));<br>		waterCar.move();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>控制台</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs undefined">地上跑<br>增加新的功能，飞行<br>地上跑<br>天上飞<br>增加新的功能，游泳<br>地上跑<br>天上飞<br>水里游<br></code></pre></td></tr></table></figure>
<p>IO流示例</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Reader r = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(<span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"d:/a.txt"</span>))));<br></code></pre></td></tr></table></figure>
<h5 id="IO流实现细节"><a href="#IO流实现细节" class="headerlink" title="IO流实现细节"></a>IO流实现细节</h5><p>– Component抽象构件角色：<br>    • io流中的InputStream、OutputStream、Reader、Writer<br>– ConcreteComponent 具体构件角色：<br>    • io流中的FileInputStream、FileOutputStream<br>– Decorator装饰角色：<br>    • 持有一个抽象构件的引用：io流中的FilterInputStream、FilterOutputStream<br>– ConcreteDecorator具体装饰角色：<br>    • 负责给构件对象增加新的责任。Io流中的BufferedOutputStream、BufferedInputStream等。</p>
<h5 id="开发中使用的场景"><a href="#开发中使用的场景" class="headerlink" title="开发中使用的场景"></a>开发中使用的场景</h5><p>– IO中输入流和输出流的设计<br>– Swing包中图形界面构件功能<br>– Servlet API 中提供了一个request对象的Decorator设计模式的默认实现类HttpServletRequest<strong>Wrapper</strong>，HttpServletRequest<strong>Wrapper</strong>类，增强了request对象的功能。<br>– Struts2中，request，response,session对象的处理</p>
<h5 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h5><p>​    – 装饰模式（Decorator）也叫包装器模式（Wrapper）<br>​    – 装饰模式降低系统的耦合度，可以动态的增加或删除对象的职责，并使得需要装饰的具体构建类和具体装饰类可以独立变化，以便增加新的具体构建类和具体装饰类。<br>• 优点<br>​    – 扩展对象功能，比继承灵活，不会导致类个数急剧增加<br>​    – 可以对一个对象进行多次装饰，创造出不同行为的组合，得到功能更加强大的对象<br>​    – 具体构建类和具体装饰类可以独立变化，用户可以根据需要自己增加新的具体构件子类和具体装饰子类。<br>• 缺点<br>​    – 产生很多小对象。大量小对象占据内存，一定程度上影响性能。<br>​    – 装饰模式易于出错，调试排查比较麻烦。</p>
<h5 id="装饰模式和桥接模式的区别："><a href="#装饰模式和桥接模式的区别：" class="headerlink" title="装饰模式和桥接模式的区别："></a>装饰模式和桥接模式的区别：</h5><p>– 两个模式都是为了解决过多子类对象问题。但他们の诱因不一样。桥模式是对象自身现有机制沿着多个维度变化，是既有部分不稳定。装饰模式是为了增加新的功能。</p>
<h4 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h4><h5 id="迪米特法则-最少知识原则-："><a href="#迪米特法则-最少知识原则-：" class="headerlink" title="迪米特法则(最少知识原则)："></a>迪米特法则(最少知识原则)：</h5><p> 一个软件实体应当尽可能少的与其他实体发生相互作用</p>
<p><img src="F:/01%E3%80%81JavaWEB/java%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FGOF23/image/TIM%E6%88%AA%E5%9B%BE20190506222842.png" alt=""></p>
<h5 id="模仿开公司"><a href="#模仿开公司" class="headerlink" title="模仿开公司"></a>模仿开公司</h5><p>政府机构</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> 工商局  </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">checkName</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//核名</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> 海淀区工商局 <span class="hljs-keyword">implements</span> 工商局 </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkName</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"检查名字是否有冲突！"</span>);<br>	&#125;<br><br>&#125;<br><br><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> 税务局 </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">taxCertificate</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//办理税务登记证</span><br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> 海淀税务局 <span class="hljs-keyword">implements</span> 税务局 </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">taxCertificate</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"在海淀税务局办理税务登记证！"</span>);<br>	&#125;<br><br>&#125;<br><br><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> 银行 </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span>  <span class="hljs-title">openAccount</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//开户</span><br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> 中国工商银行 <span class="hljs-keyword">implements</span> 银行 </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">openAccount</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"在中国工商银行开户！"</span>);<br>	&#125;<br><br>&#125;<br><br><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> 质检局 </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span>  <span class="hljs-title">orgCodeCertificate</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//办理组织机构代码证</span><br>&#125;<br><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> 海淀质检局 <span class="hljs-keyword">implements</span> 质检局 </span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">orgCodeCertificate</span><span class="hljs-params">()</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"在海淀区质检局办理组织机构代码证！"</span>);<br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>外观：RegisterFacade.java</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-comment">/**<br> * 办理注册公司流程的门面对象<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterFacade</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">register</span><span class="hljs-params">()</span></span>&#123;<br>		工商局  a = <span class="hljs-keyword">new</span> 海淀区工商局();<br>		a.checkName();<br>		质检局 b = <span class="hljs-keyword">new</span> 海淀质检局();<br>		b.orgCodeCertificate();<br>		税务局  c  = <span class="hljs-keyword">new</span> 海淀税务局();<br>		c.taxCertificate();<br>		银行  d = <span class="hljs-keyword">new</span> 中国工商银行();<br>		d.openAccount();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>调用Client</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client1</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//不使用外观模式</span><br><span class="hljs-comment">//		工商局  a = new 海淀区工商局();</span><br><span class="hljs-comment">//		a.checkName();</span><br><span class="hljs-comment">//		质检局 b = new 海淀质检局();</span><br><span class="hljs-comment">//		b.orgCodeCertificate();</span><br><span class="hljs-comment">//		税务局  c  = new 海淀税务局();</span><br><span class="hljs-comment">//		c.taxCertificate();</span><br><span class="hljs-comment">//		银行  d = new 中国工商银行();</span><br><span class="hljs-comment">//		d.openAccount();</span><br>		<br>		<span class="hljs-keyword">new</span> RegisterFacade().register();<br>		<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h4><p>• 场景：<br>    – 内存属于稀缺资源，不要随便浪费。如果有很多个完全相同或相似的对象，我们可以通过享元模式，节省内存。<br>• 核心：<br>    – 享元模式以共享的方式高效地支持大量细粒度对象的重用。<br>    – 享元对象能做到共享的关键是区分了内部状态和外部状态。<br>        • 内部状态：可以共享，不会随环境变化而改变<br>        • 外部状态：不可以共享，会随环境变化而改变</p>
<h5 id="享元模式实现"><a href="#享元模式实现" class="headerlink" title="享元模式实现"></a>享元模式实现</h5><p>– FlyweightFactory享元工厂类<br>    • 创建并管理享元对象，享元池一般设计成键值对<br>– FlyWeight抽象享元类<br>    • 通常是一个接口或抽象类，声明公共方法，这些方法可以向外界提供对象的内部状态，设置外部状态。<br>– ConcreteFlyWeight具体享元类<br>    • 为内部状态提供成员变量进行存储<br>– UnsharedConcreteFlyWeight非共享享元类<br>    • 不能被共享的子类可以设计为非共享享元类</p>
<p>享元接口，和享元类（内部状态）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.flyweight;<br><br><span class="hljs-comment">/**<br> * 享元类<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ChessFlyWeight</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setColor</span><span class="hljs-params">(String c)</span></span>;<br>	<span class="hljs-function">String <span class="hljs-title">getColor</span><span class="hljs-params">()</span></span>;<br>	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">(Coordinate c)</span></span>;<br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteChess</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ChessFlyWeight</span> </span>&#123;<br><br>	<span class="hljs-keyword">private</span> String color;<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ConcreteChess</span><span class="hljs-params">(String color)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.color = color;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">(Coordinate c)</span> </span>&#123;<br>		System.out.println(<span class="hljs-string">"棋子颜色："</span>+color);<br>		System.out.println(<span class="hljs-string">"棋子位置："</span>+c.getX()+<span class="hljs-string">"----"</span>+c.getY());<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getColor</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> color;<br>	&#125;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setColor</span><span class="hljs-params">(String c)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.color = c;<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>外部享元类：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.flyweight;<br><br><span class="hljs-comment">/**<br> * 外部状态UnSharedConcreteFlyWeight<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Coordinate</span> </span>&#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> x,y;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Coordinate</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>&#123;<br>		<span class="hljs-keyword">super</span>();<br>		<span class="hljs-keyword">this</span>.x = x;<br>		<span class="hljs-keyword">this</span>.y = y;<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getX</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> x;<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setX</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.x = x;<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getY</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-keyword">return</span> y;<br>	&#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setY</span><span class="hljs-params">(<span class="hljs-keyword">int</span> y)</span> </span>&#123;<br>		<span class="hljs-keyword">this</span>.y = y;<br>	&#125;<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>享元工厂（享元池）</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.flyweight;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-comment">/**<br> * 享元工厂类<br> * <span class="hljs-doctag">@author</span> Administrator<br> *<br> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChessFlyWeightFactory</span> </span>&#123;<br>	<span class="hljs-comment">//享元池</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String,ChessFlyWeight&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, ChessFlyWeight&gt;();<br>	<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ChessFlyWeight  <span class="hljs-title">getChess</span><span class="hljs-params">(String color)</span></span>&#123;<br>		<br>		<span class="hljs-keyword">if</span>(map.get(color)!=<span class="hljs-keyword">null</span>)&#123;<br>			<span class="hljs-keyword">return</span> map.get(color);<br>		&#125;<span class="hljs-keyword">else</span>&#123;<br>			ChessFlyWeight cfw = <span class="hljs-keyword">new</span> ConcreteChess(color);<br>			map.put(color, cfw);<br>			<span class="hljs-keyword">return</span> cfw;<br>		&#125;<br>		<br>	&#125;<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<p>测试</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bjsxt.flyweight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>		ChessFlyWeight chess1 = ChessFlyWeightFactory.getChess(<span class="hljs-string">"黑色"</span>);<br>		ChessFlyWeight chess2 = ChessFlyWeightFactory.getChess(<span class="hljs-string">"黑色"</span>);<br>		System.out.println(chess1);<br>		System.out.println(chess2);<br>		<br>		System.out.println(<span class="hljs-string">"增加外部状态的处理==========="</span>);<br>		chess1.display(<span class="hljs-keyword">new</span> Coordinate(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>));<br>		chess2.display(<span class="hljs-keyword">new</span> Coordinate(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>));<br>		<br>		<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="享元模式开发中应用的场景："><a href="#享元模式开发中应用的场景：" class="headerlink" title="享元模式开发中应用的场景："></a>享元模式开发中应用的场景：</h5><p>– 享元模式由于其共享的特性，可以在任何“池”中操作，比如：线程池、数据库连接池。<br>– String类的设计也是享元模式</p>

    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/2019/05/28/创建型模式/" rel="next" title="'创建型模式'"><i class="fas fa-angle-left"></i><span class="nav-title">'创建型模式'</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
      <a href="/2019/05/28/行为型模式/" rel="prev" title="'行为型模式'"><span class="nav-title">'行为型模式'</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </nav>
  
  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control">
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/myavatar.png" alt="John Doe">
  
  <h1 class="author-name">John Doe</h1>
  <h2 class="author-description"></h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">14</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">0</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">0</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>文章目录</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#结构型模式"><span class="toc-text">结构型模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#适配器模式-adapter"><span class="toc-text">适配器模式(adapter)</span></a></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#代理模式-Proxy-pattern"><span class="toc-text">代理模式(Proxy pattern)</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#使用场景"><span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#静态代理模式"><span class="toc-text">静态代理模式</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#动态代理"><span class="toc-text">动态代理</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#开发框架中应用场景"><span class="toc-text">开发框架中应用场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#桥接模式"><span class="toc-text">桥接模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#未使用桥接，使用多继承"><span class="toc-text">未使用桥接，使用多继承</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#使用桥接"><span class="toc-text">使用桥接</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#桥接模式总结："><span class="toc-text">桥接模式总结：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#桥接模式实际开发中应用场景"><span class="toc-text">桥接模式实际开发中应用场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#组合模式"><span class="toc-text">组合模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#模仿杀毒软件杀毒："><span class="toc-text">模仿杀毒软件杀毒：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#开发中的应用场景："><span class="toc-text">开发中的应用场景：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#装饰模式"><span class="toc-text">装饰模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#IO流实现细节"><span class="toc-text">IO流实现细节</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#开发中使用的场景"><span class="toc-text">开发中使用的场景</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#总结："><span class="toc-text">总结：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#装饰模式和桥接模式的区别："><span class="toc-text">装饰模式和桥接模式的区别：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#外观模式"><span class="toc-text">外观模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#迪米特法则-最少知识原则-："><span class="toc-text">迪米特法则(最少知识原则)：</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#模仿开公司"><span class="toc-text">模仿开公司</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="list-group-item toc-link" href="#享元模式"><span class="toc-text">享元模式</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#享元模式实现"><span class="toc-text">享元模式实现</span></a></li><li class="toc-item toc-level-5"><a class="list-group-item toc-link" href="#享元模式开发中应用的场景："><span class="toc-text">享元模式开发中应用的场景：</span></a></li></ol></li></ol></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接<p></p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="1021782580@qq.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/Yukinoon" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/u/2301607054?is_all=1" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">John Doe</span><span class="year"><i class="far fa-copyright"></i>2019</span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
